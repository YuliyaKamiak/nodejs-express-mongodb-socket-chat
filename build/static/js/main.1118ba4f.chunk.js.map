{"version":3,"sources":["store/notifications/index.js","helpers/request.js","store/auth/index.js","constants/routes.js","components/common/PrivateRoute.jsx","components/common/ButtonLink.jsx","components/App/AppHeader.jsx","components/common/AuthFormInput.jsx","components/common/PasswordInput.jsx","components/Auth/LoginForm.jsx","components/Auth/RegistrationForm.jsx","components/Auth/LogoutForm.jsx","components/Auth/Auth.jsx","store/news/index.js","components/News/NewsListCard.jsx","components/News/NewsList.jsx","components/News/NewsAdd.jsx","components/News/News.jsx","store/chat/index.js","components/Chat/ChatChannelList.jsx","components/Chat/ChatActiveChatArea.jsx","components/Chat/Chat.jsx","components/Profile/Profile.jsx","store/adminPanel/index.js","components/AdminPanel/AdminPanelSettingsFormGroup.jsx","components/AdminPanel/AdminPanel.jsx","components/common/withNotificationsHOC.jsx","components/App/App.jsx","theme.js","store/index.js","index.js"],"names":["createActions","OPEN_NOTIFICATION","n","CLOSE_NOTIFICATION","prefix","openNotification","closeNotification","notificationsSelector","state","notifications","handleActions","action","payload","text","variant","id","length","isActive","withoutDeletedNotification","filter","notification","map","not","i","instance","axios","create","baseURL","waitQueue","isRefreshDispatched","request","url","method","data","headers","isRefresh","isWithoutToken","getState","dispatch","Promise","resolve","reject","tokensSelector","accessToken","accessTokenExpiredAt","refreshTokenExpiredAt","requestFunc","refreshToken","then","response","catch","error","message","status","errorResponse","console","group","info","dir","groupEnd","logout","detail","isTokenExpired","Date","now","isRefreshExpired","push","refreshTokenRequest","forEach","config","userProfileSelector","auth","userProfile","userPermissionsSelector","permissions","tokens","isAuthorizedSelector","isLoadingUserProfileSelector","isLoadingUserProfile","setProfileData","createAction","setTokenData","logoutUser","setIsLoadingUserProfile","_","image","middleName","surName","username","firstName","defaultPermissions","chat","C","D","R","U","news","settings","permission","combineReducers","getUserProfileFromToken","tokenData","localStorage","getItem","JSON","parse","removeItem","saveProfile","oldPassword","newPassword","confirmPassword","avatar","FormData","append","finally","connect","isAuthorized","permissionPath","path","component","get","from","to","routes","AdapterLink","React","forwardRef","props","ref","innerRef","ButtonLink","withRouter","location","children","isRouterLink","color","Button","pathname","AppHeader","this","profile","_get","classes","AppBar","position","className","appBar","Container","Toolbar","logo","src","alt","renderAuthorizedNav","PureComponent","compose","withStyles","flexGrow","AuthFormInput","theme","textField","display","marginBottom","spacing","handleChange","value","label","required","FormControl","InputLabel","htmlFor","Input","type","autoComplete","onChange","startAdornment","InputAdornment","Person","PasswordInput","name","useState","showPassword","values","setValues","classNames","Https","endAdornment","IconButton","aria-label","onClick","onMouseDown","event","preventDefault","Visibility","VisibilityOff","form","flexDirection","padding","maxWidth","textCenter","textAlign","password","target","Paper","onSubmit","setItem","stringify","loginUser","Typography","history","repeatPassword","firstname","lastname","patronicname","registerUser","Auth","wrapper","gutterBottom","exact","LoginForm","RegistrationForm","background","backgroundPosition","backgroundSize","width","flex","paddingTop","isLoadingNewsListSelector","isLoadingNewsList","isLoadingNewsFormSelector","isLoadingNewsForm","isLoadedSelector","isLoaded","newsListSelector","setIsLoadingNewsList","setIsLoadingNewsForm","setNewsList","appendNews","setToZeroNewsList","createNews","title","updateNews","styles","card","NewsListCard","post","isUpdateAllowed","isDeleteAllowed","Card","CardHeader","Avatar","user","subheader","created_at","CardContent","CardActions","deleteNews","NewsList","log","isLoading","isCreateAllowed","key","NewsAdd","createdAt","setState","handleSubmit","match","params","newsList","find","formCard","Grid","container","item","xs","TextField","margin","disabled","fullWidth","multiline","rows","ButtonGroup","News","socket","chatUsersSelector","users","chatMessagesList","messages","chatSelectedRoomSelector","selectedRoom","chatMessageText","messageText","setUsers","addUser","updateUser","removeUser","appendMessage","setRoomHistory","setToZeroMessages","setSelectedRoom","setMessageText","resetMessage","userId","socketId","sendMessage","emit","senderId","recipientId","roomId","column","height","selectRoom","connectRoom","square","Divider","List","index","ListItem","button","selected","ListItemText","primary","ActiveChannelArea","chatArea","direction","wrap","messageContainer","isMyMessage","isAnotherMessage","messagePrimary","messageSecondary","style","InputLabelProps","shrink","backgroundColor","palette","grey","A700","secondary","main","alignSelf","overflowY","alignItems","Chat","socketIO","on","disconnect","ChatActiveChatArea","empty","toolbar","mixins","Profile","fileRef","createRef","cancelHandler","handleChangeFile","reader","FileReader","onload","e","result","current","files","readAsDataURL","submitHandler","avatarPreviewWrapper","avatarPreview","uploadButton","formActions","borderRadius","flexWrap","marginLeft","marginRight","marginTop","isLoadingUsersSelector","adminPanel","isLoadingUsers","usersSelector","setIsLoadingUsers","setIsLoadingForm","setToZeroUsers","isLoadingForm","getUsers","updateUserPermission","deleteUser","SettingsFormGroup","FormGroup","FormControlLabel","control","Checkbox","checked","defaultState","selectedUserId","selectedUser","AdminPanel","part","partRule","handleChangeUser","_cloneDeep","u","deleteHandler","mb3","userAvatar","userSelect","Select","MenuItem","renderForms","justify","variantIcon","success","CheckCircleIcon","warning","WarningIcon","ErrorIcon","InfoIcon","useStyles1","makeStyles","green","dark","amber","icon","fontSize","iconVariant","opacity","MySnackbarContentWrapper","onClose","other","Icon","SnackbarContent","clsx","aria-describedby","WrappedComponent","mapDispatchToProps","handleClose","notificationId","reason","currentNotification","Snackbar","anchorOrigin","vertical","horizontal","open","autoHideDuration","root","minHeight","mainLayoutWrapper","MainLayout","withLayoutAndNotifications","Component","withNotifications","withLayout","App","Box","createMuiTheme","red","A400","default","rootReducer","createAppStore","createStore","applyMiddleware","thunk","window","__REDUX_DEVTOOLS_EXTENSION__","noop","ReactDOM","render","ThemeProvider","CssBaseline","store","document","getElementById"],"mappings":"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","file":"static/js/main.1118ba4f.chunk.js","sourcesContent":["import { createActions, handleActions } from 'redux-actions';\r\n\r\nexport const { openNotification, closeNotification } = createActions(\r\n  {\r\n    OPEN_NOTIFICATION: n => n,\r\n    CLOSE_NOTIFICATION: n => n\r\n  },\r\n  { prefix: 'notifications' }\r\n);\r\n\r\nexport const notificationsSelector = state => state.notifications;\r\n\r\nconst notifications = handleActions(\r\n  {\r\n    [openNotification]: (state, action) => {\r\n      const { text, variant } = action.payload;\r\n      return [\r\n        ...state,\r\n        { text, variant, id: state.length + 1, isActive: !state.length }\r\n      ];\r\n    },\r\n    [closeNotification]: (state, action) => {\r\n      const withoutDeletedNotification = state.filter(\r\n        notification => notification.id !== action.payload\r\n      );\r\n      return withoutDeletedNotification.length\r\n        ? withoutDeletedNotification.map((not, i) => {\r\n            if (i === withoutDeletedNotification.length - 1) {\r\n              not.isActive = true;\r\n            }\r\n            return not;\r\n          })\r\n        : withoutDeletedNotification;\r\n    }\r\n  },\r\n  []\r\n);\r\n\r\nexport default notifications;\r\n","import axios from 'axios'\r\nimport { tokensSelector, refreshTokenRequest, logout } from '../store/auth'\r\nimport { openNotification } from '../store/notifications'\r\n// const baseURL = 'https://homework-loft.herokuapp.com/api/'\r\nconst baseURL = '/api' // 'http://localhost:3000/api/'\r\nconst instance = axios.create({ baseURL })\r\n\r\nconst waitQueue = []\r\nlet isRefreshDispatched = false\r\n\r\nconst request = ({\r\n  url,\r\n  method,\r\n  data,\r\n  headers = {},\r\n  isRefresh,\r\n  isWithoutToken,\r\n  getState = () => ({}),\r\n  dispatch = () => {},\r\n}) =>\r\n  new Promise((resolve, reject) => {\r\n    const {\r\n      accessToken,\r\n      accessTokenExpiredAt,\r\n      refreshTokenExpiredAt,\r\n    } = tokensSelector(getState())\r\n\r\n    // request handler\r\n    const requestFunc = ({ url, method, headers, data, resolve, reject }) => {\r\n      if (!isWithoutToken) {\r\n        const { accessToken, refreshToken } = tokensSelector(getState())\r\n        headers['Authorization'] = isRefresh ? refreshToken : accessToken\r\n      }\r\n\r\n      return instance({ url, method, headers, data })\r\n        .then((response) => {\r\n          resolve(response.data)\r\n        })\r\n        .catch((error) => {\r\n          if (error.response) {\r\n            const status = error.response.status || 404\r\n            const errorResponse = error.response.data\r\n            console.group('Error from: ' + url)\r\n            console.info('Status: ' + status)\r\n            console.dir(errorResponse)\r\n            console.groupEnd()\r\n\r\n            switch (status) {\r\n              case 401:\r\n              case 403:\r\n                dispatch(logout())\r\n                return reject(errorResponse)\r\n              case 500:\r\n              case 502:\r\n              case 503:\r\n                dispatch(\r\n                  openNotification({\r\n                    variant: 'error',\r\n                    text: `${status}!\\nSomething is wrong))`,\r\n                  }),\r\n                )\r\n                return reject({ detail: 'Unknown error' })\r\n              default:\r\n                return reject(errorResponse)\r\n            }\r\n          } else {\r\n            dispatch(\r\n              openNotification({\r\n                variant: 'error',\r\n                text: `Error!!\\n${error.message}`,\r\n              }),\r\n            )\r\n            return reject(error.message)\r\n          }\r\n        })\r\n    }\r\n\r\n    const isTokenExpired = accessTokenExpiredAt <= Date.now()\r\n    const isRefreshExpired = refreshTokenExpiredAt <= Date.now()\r\n\r\n    // If should refresh token\r\n    if (accessToken && isTokenExpired && !isRefreshExpired && !isWithoutToken) {\r\n      // push original request to waiting stack\r\n      !isRefresh &&\r\n        waitQueue.push({\r\n          url,\r\n          method,\r\n          data,\r\n          headers,\r\n          isRefresh,\r\n          resolve,\r\n          reject,\r\n        })\r\n\r\n      // dispatch refresh token (first-time only!)\r\n      if (!isRefresh && !isRefreshDispatched) {\r\n        isRefreshDispatched = true\r\n        dispatch(refreshTokenRequest())\r\n          .then(() => {\r\n            isRefreshDispatched = false\r\n            // and after refresh - execute requests from waiting stack\r\n            waitQueue.forEach((config) => requestFunc(config))\r\n          })\r\n          .catch(() => {\r\n            // by default in error - logout user\r\n            dispatch(logout())\r\n            // eslint-disable-next-line\r\n            reject({ detail: 'Refresh token error' })\r\n          })\r\n      } else if (isRefresh) {\r\n        // if has been called refresh method\r\n        requestFunc({ url, method, data, headers, resolve, reject })\r\n      }\r\n    } else if (isRefreshExpired && !isWithoutToken) {\r\n      // if refresh is expired - just logout\r\n      dispatch(logout())\r\n      // eslint-disable-next-line\r\n      reject({ detail: 'Refresh token is expired' })\r\n    } else {\r\n      // by default\r\n      requestFunc({ url, method, data, headers, resolve, reject })\r\n    }\r\n  })\r\n\r\nexport default request\r\n","import { createAction, handleActions } from 'redux-actions';\r\nimport { combineReducers } from 'redux';\r\nimport request from '../../helpers/request';\r\nimport { openNotification } from '../notifications';\r\nexport const userProfileSelector = state => state.auth.userProfile;\r\nexport const userPermissionsSelector = state => state.auth.permissions;\r\nexport const tokensSelector = state => state.auth.tokens;\r\nexport const isAuthorizedSelector = state => !!state.auth.tokens.accessToken;\r\nexport const isLoadingUserProfileSelector = state => state.auth.isLoadingUserProfile;\r\n\r\nconst actionsPrefix = 'AUTH';\r\nexport const loginUserRequest = createAction(`${actionsPrefix}/LOGIN_USER_REQUEST`);\r\nexport const registrationUserRequest = createAction(`${actionsPrefix}/REGISTRATION_USER_REQUEST`);\r\nexport const setProfileData = createAction(`${actionsPrefix}/SET_PROFILE_DATA`);\r\nexport const setTokenData = createAction(`${actionsPrefix}/SET_TOKEN_DATA`);\r\nexport const logoutUser = createAction(`${actionsPrefix}/LOGOUT_USER`);\r\nexport const setIsLoadingUserProfile = createAction(`${actionsPrefix}/SET_IS_LOADING_USER_PROFILE`);\r\n\r\nconst isLoadingUserProfile = handleActions(\r\n  {\r\n    [setIsLoadingUserProfile]: (_, action) => action.payload\r\n  },\r\n  false\r\n);\r\n\r\nconst userProfile = handleActions(\r\n  {\r\n    [setProfileData]: (state, action) => {\r\n      const { id, image, middleName, surName, username, firstName } = action.payload;\r\n      return { id, image, firstName, middleName, surName, username };\r\n    },\r\n    [logoutUser]: () => null\r\n  },\r\n  null\r\n);\r\nconst defaultPermissions = {\r\n  chat: { C: false, D: false, R: false, U: false },\r\n  news: { C: false, D: false, R: false, U: false },\r\n  settings: { C: false, D: false, R: false, U: false }\r\n};\r\nconst permissions = handleActions(\r\n  {\r\n    [setProfileData]: (state, action) => {\r\n      const { permission } = action.payload;\r\n      return permission;\r\n    },\r\n    [logoutUser]: () => defaultPermissions\r\n  },\r\n  defaultPermissions\r\n);\r\n\r\nconst tokens = handleActions(\r\n  {\r\n    [setTokenData]: (state, action) => {\r\n      const {\r\n        accessToken,\r\n        accessTokenExpiredAt,\r\n        refreshToken,\r\n        refreshTokenExpiredAt\r\n      } = action.payload;\r\n      return {\r\n        accessToken,\r\n        accessTokenExpiredAt,\r\n        refreshToken,\r\n        refreshTokenExpiredAt\r\n      };\r\n    },\r\n    [logoutUser]: () => ({\r\n      accessToken: null,\r\n      accessTokenExpiredAt: null,\r\n      refreshToken: null,\r\n      refreshTokenExpiredAt: null\r\n    })\r\n  },\r\n  {\r\n    accessToken: null,\r\n    accessTokenExpiredAt: null,\r\n    refreshToken: null,\r\n    refreshTokenExpiredAt: null\r\n  }\r\n);\r\n\r\nexport default combineReducers({\r\n  userProfile,\r\n  permissions,\r\n  tokens,\r\n  isLoadingUserProfile\r\n});\r\n\r\nexport const loginUser = ({ username, password }) => (dispatch, getState) =>\r\n  new Promise((resolve, reject) => {\r\n    const data = {\r\n      username,\r\n      password\r\n    };\r\n    request({\r\n      url: '/login',\r\n      method: 'POST',\r\n      data,\r\n      isWithoutToken: true,\r\n      dispatch,\r\n      getState\r\n    })\r\n      .then(data => {\r\n        dispatch(openNotification({ text: 'Вы успешно вошли!', variant: 'success' }));\r\n        const { accessToken, accessTokenExpiredAt, refreshToken, refreshTokenExpiredAt } = data;\r\n        localStorage.setItem(\r\n          'token-data',\r\n          JSON.stringify({\r\n            accessToken,\r\n            accessTokenExpiredAt,\r\n            refreshToken,\r\n            refreshTokenExpiredAt\r\n          })\r\n        );\r\n        dispatch(setProfileData(data));\r\n        dispatch(setTokenData(data));\r\n        resolve(data);\r\n      })\r\n      .catch(error => {\r\n        dispatch(\r\n          openNotification({\r\n            text: error.message,\r\n            variant: 'error'\r\n          })\r\n        );\r\n        reject(error);\r\n      });\r\n  });\r\n\r\nexport const registerUser = ({ username, password, firstname, lastname, patronicname }) => (\r\n  dispatch,\r\n  getState\r\n) =>\r\n  new Promise((resolve, reject) => {\r\n    const data = {\r\n      username,\r\n      surName: lastname,\r\n      firstName: firstname,\r\n      middleName: patronicname,\r\n      password\r\n    };\r\n    request({\r\n      url: '/registration',\r\n      data,\r\n      method: 'POST',\r\n      isWithoutToken: true,\r\n      dispatch,\r\n      getState\r\n    })\r\n      .then(() => {\r\n        dispatch(\r\n          openNotification({\r\n            text: 'Вы успешно зарегистрированы!',\r\n            variant: 'success'\r\n          })\r\n        );\r\n        resolve(data);\r\n      })\r\n      .catch(error => {\r\n        dispatch(\r\n          openNotification({\r\n            text: error.message,\r\n            variant: 'error'\r\n          })\r\n        );\r\n        reject(error);\r\n      });\r\n  });\r\n\r\nexport const getUserProfileFromToken = () => (dispatch, getState) => {\r\n  const tokenData = localStorage.getItem('token-data');\r\n  if (!tokenData) return;\r\n  dispatch(setTokenData(JSON.parse(tokenData)));\r\n  request({ url: '/profile', method: 'GET', dispatch, getState })\r\n    .then(data => {\r\n      dispatch(setProfileData(data));\r\n    })\r\n    .catch(error => {});\r\n};\r\n\r\nexport const refreshTokenRequest = () => (dispatch, getState) =>\r\n  new Promise((resolve, reject) => {\r\n    request({ url: '/refresh-token', method: 'POST', isRefresh: true, dispatch, getState })\r\n      .then(data => {\r\n        dispatch(setTokenData(data));\r\n        resolve(resolve);\r\n      })\r\n      .catch(error => reject(error));\r\n  });\r\n\r\nexport const logout = () => dispatch => {\r\n  localStorage.removeItem('token-data');\r\n  dispatch(logoutUser());\r\n  openNotification({\r\n    text: 'Вы вышли из системы',\r\n    variant: 'info'\r\n  });\r\n};\r\n\r\nexport const saveProfile = ({ firstName, surName, middleName, oldPassword, newPassword, confirmPassword, avatar }) => (\r\n  dispatch,\r\n  getState\r\n) =>\r\n  new Promise(resolve => {\r\n    \r\n    const data = new FormData()\r\n    data.append('firstName', firstName)\r\n    data.append('surName', surName)\r\n    data.append('middleName', middleName)\r\n    data.append('oldPassword', oldPassword)\r\n    data.append('newPassword', newPassword)\r\n    data.append('confirmPassword', confirmPassword)\r\n    data.append('avatar', avatar);\r\n\r\n    dispatch(setIsLoadingUserProfile(true));\r\n    request({ url: '/profile', method: 'PATCH', data, getState, dispatch })\r\n      .then(data => {\r\n        dispatch(setProfileData(data));\r\n        dispatch(openNotification({ text: 'Профиль успешно обновлен!', variant: 'success' }));\r\n        resolve(true);\r\n      })\r\n      .catch(error => dispatch(openNotification({ text: error.message, variant: 'error' })))\r\n      .finally(() => dispatch(setIsLoadingUserProfile(false)));\r\n  });\r\n","export default {\r\n    home: '/',\r\n    registration: '/registration',\r\n    news: '/news',\r\n    chat: '/chat',\r\n    profile: '/profile',\r\n    adminPanel: '/admin-panel'\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport _ from 'lodash';\r\nimport {\r\n  userPermissionsSelector,\r\n  isAuthorizedSelector\r\n} from '../../store/auth';\r\nimport routes from '../../constants/routes';\r\nconst PrivateRoute = ({\r\n  permissionPath,\r\n  path,\r\n  component,\r\n  permissions,\r\n  isAuthorized\r\n}) => {\r\n  if (!isAuthorized || (permissionPath && !_.get(permissions, [permissionPath, 'R'], false)))\r\n    return <Redirect from={path} to={routes.home} />;\r\n\r\n  return <Route path={path} component={component} />;\r\n};\r\n\r\nexport default connect(state => ({\r\n  permissions: userPermissionsSelector(state),\r\n  isAuthorized: isAuthorizedSelector(state)\r\n}))(PrivateRoute);\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Button } from '@material-ui/core';\r\n\r\nconst AdapterLink = React.forwardRef((props, ref) => (\r\n  <Link innerRef={ref} {...props} />\r\n));\r\n\r\nconst ButtonLink = withRouter(\r\n  ({ path, location, children, isRouterLink, color = 'primary' }) => (\r\n    <Button\r\n      color={\r\n        isRouterLink ? (location.pathname === path ? color : 'default') : color\r\n      }\r\n      component={AdapterLink}\r\n      to={path}\r\n    >\r\n      {children}\r\n    </Button>\r\n  )\r\n);\r\n\r\nexport default ButtonLink;\r\n","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { compose } from 'recompose';\r\nimport { AppBar, Toolbar, Container  } from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport ButtonLink from '../common/ButtonLink';\r\nimport routes from '../../constants/routes'\r\nimport {\r\n  userPermissionsSelector,\r\n  isAuthorizedSelector,\r\n  userProfileSelector\r\n} from '../../store/auth';\r\nimport _get from 'lodash.get'\r\n\r\nconst styles = () => ({\r\n  logo: {\r\n    flexGrow: 1\r\n  }\r\n});\r\n\r\nclass AppHeader extends PureComponent {\r\n  renderAuthorizedNav() {\r\n    const { permissions, profile } = this.props;\r\n    return (\r\n      <>\r\n        {_get(permissions, 'news.R', false) && (\r\n          <ButtonLink path={routes.news} isRouterLink>\r\n            Новости\r\n          </ButtonLink>\r\n        )}\r\n        {_get(permissions, 'chat.R', false) && (\r\n          <ButtonLink path={routes.chat} isRouterLink>\r\n            Чат\r\n          </ButtonLink>\r\n        )}\r\n\r\n        {_get(permissions, 'settings.R', false) && (\r\n          <ButtonLink path={routes.adminPanel} isRouterLink>\r\n            Админка\r\n          </ButtonLink>\r\n        )}\r\n        <ButtonLink path={routes.profile} isRouterLink>\r\n        { profile ? profile.username : '' }\r\n        </ButtonLink>\r\n      </>\r\n    );\r\n  }\r\n  render() {\r\n    const { classes, isAuthorized } = this.props;\r\n    return (\r\n      <div>\r\n        <AppBar position=\"static\" color=\"default\" className={classes.appBar}>\r\n          <Container>\r\n            <Toolbar>\r\n              <div className={classes.logo}>\r\n                <img src=\"../../assets/img/logo.png\" alt=\"logo\" />\r\n              </div>\r\n              <ButtonLink path={routes.home} isRouterLink>\r\n                Главная\r\n              </ButtonLink>\r\n              {isAuthorized ? this.renderAuthorizedNav() : null}\r\n            </Toolbar>\r\n          </Container>\r\n        </AppBar>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  isAuthorized: isAuthorizedSelector(state),\r\n  permissions: userPermissionsSelector(state),\r\n  profile: userProfileSelector(state)\r\n});\r\nexport default compose(\r\n  withStyles(styles),\r\n  connect(mapStateToProps)\r\n)(AppHeader);\r\n","import React from 'react';\r\nimport {\r\n  FormControl,\r\n  Input,\r\n  InputLabel,\r\n  InputAdornment\r\n} from '@material-ui/core';\r\nimport { Person } from '@material-ui/icons';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = theme => ({\r\n  textField: {\r\n    display: 200,\r\n    marginBottom: theme.spacing(3)\r\n  }\r\n});\r\n\r\nconst AuthFormInput = withStyles(styles)(\r\n  ({ id, classes, handleChange, value, label, required }) => {\r\n    return (\r\n      <FormControl className={classes.textField} required={required}>\r\n        <InputLabel htmlFor={'input-' + id}>{label}</InputLabel>\r\n        <Input\r\n          id={'input-' + id}\r\n          type=\"text\"\r\n          value={value}\r\n          autoComplete={id}\r\n          onChange={handleChange}\r\n          startAdornment={\r\n            <InputAdornment position=\"start\">\r\n              <Person />\r\n            </InputAdornment>\r\n          }\r\n        />\r\n      </FormControl>\r\n    );\r\n  }\r\n);\r\n\r\nexport default AuthFormInput;\r\n","import React from 'react';\r\nimport {\r\n  FormControl,\r\n  Input,\r\n  InputLabel,\r\n  InputAdornment,\r\n  IconButton\r\n} from '@material-ui/core';\r\nimport { Visibility, VisibilityOff, Https } from '@material-ui/icons';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport classNames from 'classnames';\r\nconst styles = theme => ({\r\n  textField: {\r\n    display: 200,\r\n    marginBottom: theme.spacing(3)\r\n  }\r\n});\r\n\r\nconst PasswordInput = withStyles(styles)(\r\n  ({ id, classes, handleChange, value, label, className, name }) => {\r\n    const [values, setValues] = React.useState({\r\n      showPassword: false\r\n    });\r\n    const handleClickShowPassword = () => {\r\n      setValues({ showPassword: !values.showPassword });\r\n    };\r\n\r\n    const handleMouseDownPassword = event => {\r\n      event.preventDefault();\r\n    };\r\n\r\n    return (\r\n      <FormControl\r\n        className={classNames(classes.textField, className)}\r\n        required\r\n      >\r\n        <InputLabel htmlFor={id}>{label}</InputLabel>\r\n        <Input\r\n          id={id}\r\n          autoComplete={id}\r\n          type={values.showPassword ? 'text' : 'password'}\r\n          name={name}\r\n          value={value}\r\n          onChange={handleChange}\r\n          startAdornment={\r\n            <InputAdornment position=\"start\">\r\n              <Https />\r\n            </InputAdornment>\r\n          }\r\n          endAdornment={\r\n            <InputAdornment position=\"end\">\r\n              <IconButton\r\n                aria-label=\"toggle password visibility\"\r\n                onClick={handleClickShowPassword}\r\n                onMouseDown={handleMouseDownPassword}\r\n              >\r\n                {values.showPassword ? <Visibility /> : <VisibilityOff />}\r\n              </IconButton>\r\n            </InputAdornment>\r\n          }\r\n        />\r\n      </FormControl>\r\n    );\r\n  }\r\n);\r\n\r\nexport default PasswordInput;\r\n","import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { Typography, Paper, Button } from '@material-ui/core';\r\nimport AuthFormInput from '../common/AuthFormInput';\r\nimport PasswordInput from '../common/PasswordInput';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport classNames from 'classnames';\r\nimport { compose } from 'recompose';\r\nimport { loginUser } from '../../store/auth';\r\nimport routes from '../../constants/routes';\r\n\r\nconst styles = () => ({\r\n  form: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    padding: '20px 40px',\r\n    maxWidth: '300px'\r\n  },\r\n  textCenter: {\r\n    textAlign: 'center'\r\n  }\r\n});\r\n\r\nconst LoginForm = ({ classes, dispatch }) => {\r\n  const [values, setValues] = useState({\r\n    username: '',\r\n    password: ''\r\n  });\r\n  const handleChange = name => event => {\r\n    setValues({ ...values, [name]: event.target.value });\r\n  };\r\n  const handleSubmit = event => {\r\n    event.preventDefault();\r\n    const { username, password } = values;\r\n    dispatch(loginUser({ username, password }));\r\n  };\r\n  return (\r\n    <>\r\n      <Paper className={classes.form} component=\"form\" onSubmit={handleSubmit}>\r\n        <AuthFormInput\r\n          handleChange={handleChange('username')}\r\n          value={values.username}\r\n          id=\"username\"\r\n          label=\"Имя пользователя\"\r\n          required\r\n        />\r\n        <PasswordInput\r\n          handleChange={handleChange('password')}\r\n          value={values.password}\r\n          id=\"password\"\r\n          label=\"Пароль\"\r\n        />\r\n        <Button color=\"primary\" variant=\"contained\" type=\"submit\">\r\n          Войти\r\n        </Button>\r\n      </Paper>\r\n      <Typography className={classNames(classes.textCenter, classes.form)}>\r\n        Впервые на сайте? <Link to={routes.registration}>Регистрация</Link>\r\n      </Typography>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default compose(\r\n  withStyles(styles),\r\n  connect()\r\n)(LoginForm);\r\n","import React, { useState } from 'react';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { Typography, Paper, Button } from '@material-ui/core';\r\nimport AuthFormInput from '../common/AuthFormInput';\r\nimport PasswordInput from '../common/PasswordInput';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport classNames from 'classnames';\r\nimport { compose } from 'recompose';\r\nimport { registerUser } from '../../store/auth';\r\nimport routes from '../../constants/routes'\r\nconst styles = () => ({\r\n  form: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    padding: '20px 40px',\r\n    maxWidth: '300px'\r\n  },\r\n  textCenter: {\r\n    textAlign: 'center'\r\n  }\r\n});\r\n\r\nconst RegistrationForm = ({ classes, dispatch, history }) => {\r\n  const [values, setValues] = useState({\r\n    username: '',\r\n    password: '',\r\n    repeatPassword: '',\r\n    firstname: '',\r\n    lastname: '',\r\n    patronicname: ''\r\n  });\r\n  const handleChange = name => event => {\r\n    setValues({ ...values, [name]: event.target.value });\r\n  };\r\n  const handleSubmit = event => {\r\n    event.preventDefault();\r\n    const { username, password, firstname, lastname, patronicname } = values;\r\n    dispatch(\r\n      registerUser({ username, password, firstname, lastname, patronicname })\r\n    )\r\n      .then(() => history.push(routes.home))\r\n      .catch(console.error);\r\n  };\r\n  return (\r\n    <>\r\n      <Paper className={classes.form} component=\"form\" onSubmit={handleSubmit}>\r\n        <AuthFormInput\r\n          id=\"username\"\r\n          handleChange={handleChange('username')}\r\n          value={values.username}\r\n          label=\"Имя пользователя\"\r\n          required\r\n        />\r\n        <AuthFormInput\r\n          id=\"lastname\"\r\n          handleChange={handleChange('lastname')}\r\n          value={values.lastname}\r\n          label=\"Фамилия\"\r\n        />\r\n        <AuthFormInput\r\n          id=\"firstname\"\r\n          handleChange={handleChange('firstname')}\r\n          value={values.firstname}\r\n          label=\"Имя\"\r\n        />\r\n        <AuthFormInput\r\n          id=\"patronicname\"\r\n          handleChange={handleChange('patronicname')}\r\n          value={values.patronicname}\r\n          label=\"Отчество\"\r\n        />\r\n        <PasswordInput\r\n          id=\"password\"\r\n          handleChange={handleChange('password')}\r\n          value={values.password}\r\n          label=\"Пароль\"\r\n        />\r\n        <PasswordInput\r\n          id=\"repeatPassword\"\r\n          handleChange={handleChange('repeatPassword')}\r\n          value={values.repeatPassword}\r\n          label=\"Повторить пароль\"\r\n        />\r\n        <Button color=\"primary\" variant=\"contained\" type=\"submit\">\r\n          Зарегистрироваться\r\n        </Button>\r\n      </Paper>\r\n      <Typography className={classNames(classes.textCenter, classes.form)}>\r\n        Уже зарегистрированы? <Link to={routes.home}>Войти</Link>\r\n      </Typography>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default compose(\r\n  withStyles(styles),\r\n  connect(),\r\n  withRouter\r\n)(RegistrationForm);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Paper, Button } from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { compose } from 'recompose';\r\nimport { logout } from '../../store/auth';\r\n\r\nconst styles = () => ({\r\n  form: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    padding: '20px 40px',\r\n    maxWidth: '300px'\r\n  }\r\n});\r\nconst LogoutForm = ({ classes, dispatch }) => {\r\n  const handleSubmit = event => {\r\n    event.preventDefault();\r\n    dispatch(logout());\r\n  };\r\n  return (\r\n    <Paper className={classes.form} component=\"form\" onSubmit={handleSubmit}>\r\n      <Button color=\"primary\" variant=\"contained\" type=\"submit\">\r\n        Выйти\r\n      </Button>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default compose(\r\n  withStyles(styles),\r\n  connect()\r\n)(LogoutForm);\r\n","import React, { PureComponent } from 'react';\r\nimport { Route, withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { Container, Typography } from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { compose } from 'recompose';\r\nimport { isAuthorizedSelector } from '../../store/auth';\r\n\r\nimport LoginForm from './LoginForm';\r\nimport RegistrationForm from './RegistrationForm';\r\nimport LogoutForm from './LogoutForm';\r\n\r\nconst styles = () => ({\r\n  wrapper: {\r\n    background: 'url(\"/assets/img/background.png\") no-repeat',\r\n    backgroundPosition: 'center center',\r\n    backgroundSize: 'cover',\r\n    width: '100%',\r\n    flex: '1 1 100%',\r\n    paddingTop: '40px'\r\n  }\r\n});\r\n\r\nclass Auth extends PureComponent {\r\n  render() {\r\n    const { classes, isAuthorized } = this.props;\r\n    return (\r\n      <div className={classes.wrapper}>\r\n        <Container>\r\n          <Typography variant=\"h4\" component=\"h2\" gutterBottom>\r\n            Ваше уютное\r\n            <br />\r\n            рабочее пространство\r\n          </Typography>\r\n          {isAuthorized ? (\r\n            <LogoutForm />\r\n          ) : (\r\n            <>\r\n              <Route path=\"/\" exact component={LoginForm} />\r\n              <Route path=\"/registration\" component={RegistrationForm} />\r\n            </>\r\n          )}\r\n        </Container>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  isAuthorized: isAuthorizedSelector(state)\r\n});\r\n\r\nexport default compose(\r\n  withStyles(styles),\r\n  connect(mapStateToProps),\r\n  withRouter\r\n)(Auth);\r\n","import { createAction, handleActions } from 'redux-actions';\r\nimport { combineReducers } from 'redux';\r\nimport request from '../../helpers/request';\r\n\r\nexport const isLoadingNewsListSelector = state => state.news.isLoadingNewsList;\r\nexport const isLoadingNewsFormSelector = state => state.news.isLoadingNewsForm;\r\nexport const isLoadedSelector = state => state.news.isLoaded;\r\nexport const newsListSelector = state => state.news.news;\r\n\r\nconst actionsPrefix = 'NEWS'\r\nexport const setIsLoadingNewsList = createAction(`${actionsPrefix}/SET_IS_LOADING_NEWS_LIST`)\r\nexport const setIsLoadingNewsForm = createAction(`${actionsPrefix}/SET_IS_LOADING_NEWS_FORM`)\r\nexport const setNewsList = createAction(`${actionsPrefix}/SET_NEWS_LIST`)\r\nexport const appendNews = createAction(`${actionsPrefix}/APPEND_NEWS`)\r\nexport const setToZeroNewsList = createAction(`${actionsPrefix}/SET_TO_ZERO_NEWS_LIST`)\r\nexport const setIsLoaded = createAction(`${actionsPrefix}/SET_IS_LOADED`)\r\n\r\n\r\nconst isLoadingNewsList = handleActions({\r\n  [setIsLoadingNewsList]: (_, action) => action.payload\r\n}, false)\r\n\r\nconst isLoadingNewsForm = handleActions({\r\n  [setIsLoadingNewsForm]: (_, action) => action.payload\r\n}, false)\r\n\r\nconst isLoaded = handleActions({\r\n  [setNewsList]: (_, action) => true\r\n}, false)\r\n\r\nconst news = handleActions({\r\n  [setNewsList]: (_, action) => action.payload,\r\n  [appendNews]: (state, action) => [action.payload, ...state],\r\n  [setToZeroNewsList]: () => []\r\n}, [])\r\n\r\nexport default combineReducers({\r\n  isLoadingNewsList,\r\n  isLoadingNewsForm,\r\n  isLoaded,\r\n  news\r\n})\r\n\r\nexport const getNews = () => (dispatch, getState) => {\r\n  if (isLoadedSelector(getState())) return;\r\n  dispatch(setIsLoadingNewsList(true))\r\n  request({ url: '/news', method: 'GET', getState, dispatch })\r\n    .then(data => dispatch(setNewsList(data)))\r\n    .catch(error => console.log(error))\r\n    .finally(() => dispatch(setIsLoadingNewsList(false)))\r\n}\r\n\r\nexport const createNews = ({ title, text }) => (dispatch, getState) => new Promise((resolve, reject) => {\r\n  const data = { title, text }\r\n  dispatch(setIsLoadingNewsForm(true))\r\n  request({ url: '/news', method: 'POST', data, getState, dispatch })\r\n    .then(data => {\r\n      dispatch(setNewsList(data))\r\n      resolve(data)\r\n    })\r\n    .catch(error => {\r\n      reject(error)\r\n    })\r\n    .finally(() =>  dispatch(setIsLoadingNewsForm(false)))\r\n})\r\n\r\nexport const updateNews = ({ id, title, text }) => (dispatch, getState) => new Promise((resolve, reject) => {\r\n  const data = { title, text }\r\n  dispatch(setIsLoadingNewsForm(true))\r\n  request({ url: `/news/${id}`, method: 'PATCH', data, getState, dispatch })\r\n    .then(data => {\r\n      dispatch(setNewsList(data))\r\n      resolve(data)\r\n    })\r\n    .catch(error => {\r\n      reject(error)\r\n    })\r\n    .finally(() =>  dispatch(setIsLoadingNewsForm(false)))\r\n})\r\n\r\nexport const deleteNews = ({ id }) => (dispatch, getState) => new Promise((resolve, reject) => {\r\n  dispatch(setIsLoadingNewsList(true))\r\n  request({ url: `/news/${id}`, method: 'DELETE', getState, dispatch })\r\n    .then(data => {\r\n      dispatch(setNewsList(data))\r\n      resolve(data)\r\n    })\r\n    .catch(error => {\r\n      reject(error)\r\n    })\r\n    .finally(() =>  dispatch(setIsLoadingNewsList(false)))\r\n})","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { compose } from 'recompose';\r\nimport { deleteNews } from '../../store/news';\r\nimport {\r\n  Typography,\r\n  Card,\r\n  CardContent,\r\n  CardHeader,\r\n  Avatar,\r\n  CardActions,\r\n  Button\r\n} from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/styles';\r\nimport ButtonLink from '../common/ButtonLink';\r\nimport { userPermissionsSelector } from '../../store/auth';\r\nimport _get from 'lodash.get'\r\n\r\nconst styles = theme => ({\r\n  wrapper: {\r\n    width: '100%',\r\n    flex: '1 1 100%',\r\n    paddingTop: '40px'\r\n  },\r\n  card: {\r\n    marginBottom: theme.spacing(2)\r\n  }\r\n});\r\n\r\nconst NewsListCard = withStyles(styles)(({ classes, post, dispatch, permission }) => {\r\n  const removeNews = () => {\r\n    dispatch(deleteNews({ id: post.id }));\r\n  };\r\n  const isUpdateAllowed = !!_get(permission, 'news.U', false);\r\n  const isDeleteAllowed = !!_get(permission, 'news.D', false);\r\n  return (\r\n    <Card className={classes.card}>\r\n      <CardHeader\r\n        avatar={\r\n          <Avatar\r\n            aria-label=\"recipe\"\r\n            src={post.user.image || '/assets/img/no-user-image.png'}\r\n            alt={post.user.username}\r\n          ></Avatar>\r\n        }\r\n        title={post.title}\r\n        subheader={post.created_at}\r\n      />\r\n      <CardContent>\r\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n          {post.text}\r\n        </Typography>\r\n      </CardContent>\r\n      <CardActions>\r\n      { isUpdateAllowed && <ButtonLink path={`/news/${post.id}/edit`}>Редактировать</ButtonLink> }\r\n      { isDeleteAllowed && <Button onClick={removeNews}>Удалить</Button> }\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n});\r\n\r\nconst mapStateToProps = state => ({\r\n  permission: userPermissionsSelector(state)\r\n});\r\nexport default compose(\r\n  withStyles(styles),\r\n  connect(mapStateToProps)\r\n)(NewsListCard);\r\n","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport {\r\n  getNews,\r\n  isLoadingNewsListSelector,\r\n  isLoadedSelector,\r\n  newsListSelector\r\n} from '../../store/news';\r\nimport ButtonLink from '../common/ButtonLink';\r\nimport NewsListCard from './NewsListCard';\r\nimport { userPermissionsSelector } from '../../store/auth';\r\nimport _get from 'lodash.get';\r\nimport routes from '../../constants/routes';\r\n\r\nclass NewsList extends PureComponent {\r\n  componentDidMount() {\r\n    const { dispatch } = this.props;\r\n    dispatch(getNews());\r\n  }\r\n  render() {\r\n    const { isLoading, isLoaded, news, permission } = this.props;\r\n    const isCreateAllowed = !!_get(permission, 'news.C', false);\r\n    return (\r\n      <>\r\n        {isCreateAllowed && (\r\n          <ButtonLink color=\"primary\" path={`${routes.news}/add`}>\r\n            Добавить\r\n          </ButtonLink>\r\n        )}\r\n        <div>\r\n          {isLoading ? <div>Loading...</div> : null}\r\n          {isLoaded ? (\r\n            news.length ? (\r\n              news.map(post => <NewsListCard post={post} key={post.id} />)\r\n            ) : (\r\n              <div>Нет новостей</div>\r\n            )\r\n          ) : null}\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  isLoading: isLoadingNewsListSelector(state),\r\n  isLoaded: isLoadedSelector(state),\r\n  news: newsListSelector(state),\r\n  permission: userPermissionsSelector(state)\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  null\r\n)(NewsList);\r\n","import React, { PureComponent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { compose } from 'recompose';\r\nimport { isLoadingNewsFormSelector, createNews, updateNews, newsListSelector } from '../../store/news';\r\nimport { withStyles } from '@material-ui/styles';\r\nimport { Paper, Grid, TextField, ButtonGroup, Button } from '@material-ui/core';\r\nimport ButtonLink from '../common/ButtonLink';\r\nimport routes from '../../constants/routes';\r\n\r\nconst styles = theme => ({\r\n  formCard: {\r\n    padding: theme.spacing(2)\r\n  },\r\n  textField: {\r\n    display: 'block',\r\n    width: '100%'\r\n  }\r\n});\r\n\r\nclass NewsAdd extends PureComponent {\r\n  state = {\r\n    title: '',\r\n    text: '',\r\n    createdAt: new Date(),\r\n    user: ''\r\n  };\r\n  componentDidMount() {\r\n    const { match, newsList } = this.props;\r\n    if (match.params.id) {\r\n      const { title, text, created_at, user } = newsList.find(news => news.id === match.params.id)\r\n      this.setState({\r\n        title,\r\n        text,\r\n        createdAt: created_at,\r\n        user: user.username\r\n      })\r\n    }\r\n  }\r\n\r\n  handleChange = event => {\r\n    const { name, value } = event.target;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    const { title, text } = this.state;\r\n    const { history, dispatch, match } = this.props;\r\n    dispatch(match.params.id ? updateNews({ title, text, id: match.params.id }) : createNews({ title, text })).then(() => history.push(routes.news));\r\n  };\r\n  render() {\r\n    const { classes } = this.props;\r\n    const { title, text, createdAt, user } = this.state;\r\n    return (\r\n      <Paper\r\n        className={classes.formCard}\r\n        component=\"form\"\r\n        onSubmit={this.handleSubmit}\r\n      >\r\n        <Grid container spacing={2}>\r\n          <Grid item xs={4}>\r\n            <TextField\r\n              label=\"Автор\"\r\n              value={user}\r\n              onChange={this.handleChange}\r\n              className={classes.textField}\r\n              margin=\"normal\"\r\n              disabled\r\n              fullWidth\r\n            />\r\n            <TextField\r\n              label=\"Дата\"\r\n              value={createdAt}\r\n              onChange={this.handleChange}\r\n              className={classes.textField}\r\n              margin=\"normal\"\r\n              disabled\r\n              fullWidth\r\n            />\r\n            <TextField\r\n              label=\"Заголовок\"\r\n              name=\"title\"\r\n              value={title}\r\n              onChange={this.handleChange}\r\n              className={classes.textField}\r\n              margin=\"normal\"\r\n              fullWidth\r\n            />\r\n          </Grid>\r\n          <Grid item xs={8}>\r\n            <TextField\r\n              label=\"Текст\"\r\n              name=\"text\"\r\n              value={text}\r\n              onChange={this.handleChange}\r\n              className={classes.textField}\r\n              margin=\"normal\"\r\n              multiline\r\n              fullWidth\r\n              rows={5}\r\n            />\r\n            <ButtonGroup>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                Сохранить\r\n              </Button>\r\n              <ButtonLink path=\"/news\" variant=\"contained\">\r\n                Отменить\r\n              </ButtonLink>\r\n            </ButtonGroup>\r\n          </Grid>\r\n        </Grid>\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = state => ({\r\n  isLoading: isLoadingNewsFormSelector(state),\r\n  newsList: newsListSelector(state)\r\n});\r\nexport default compose(\r\n  withStyles(styles),\r\n  withRouter,\r\n  connect(\r\n    mapStateToProps,\r\n    null\r\n  )\r\n)(NewsAdd);\r\n","import React, { PureComponent } from 'react';\r\nimport { Route } from 'react-router-dom';\r\nimport { Container, Typography } from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/styles';\r\nimport NewsList from './NewsList';\r\nimport NewsAdd from './NewsAdd';\r\n\r\nconst styles = theme => ({\r\n  wrapper: {\r\n    width: '100%',\r\n    flex: '1 1 100%',\r\n    paddingTop: '40px'\r\n  }\r\n});\r\n\r\nclass News extends PureComponent {\r\n  render() {\r\n    const { classes } = this.props;\r\n    return (\r\n      <div className={classes.wrapper}>\r\n        <Container>\r\n          <Typography variant=\"h4\" component=\"h2\" gutterBottom>\r\n            Новости компании\r\n          </Typography>\r\n\r\n          <Route path=\"/news\" exact component={NewsList} />\r\n          <Route path=\"/news/add\" component={NewsAdd} />\r\n          <Route path=\"/news/:id/edit\" component={NewsAdd} />\r\n        </Container>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(News);\r\n","import socketIO from 'socket.io-client'\r\nimport { createAction, handleActions } from 'redux-actions'\r\nimport { combineReducers } from 'redux'\r\nimport { userProfileSelector } from '../auth'\r\nlet socket = null\r\n\r\nexport const chatUsersSelector = (state) => state.chat.users\r\nexport const chatMessagesList = (state) => state.chat.messages\r\nexport const chatSelectedRoomSelector = (state) => state.chat.selectedRoom\r\nexport const chatMessageText = (state) => state.chat.messageText\r\n\r\nconst actionsPrefix = 'CHAT'\r\nexport const setUsers = createAction(`${actionsPrefix}/SET_USERS`)\r\nexport const addUser = createAction(`${actionsPrefix}/ADD_USER`)\r\nexport const updateUser = createAction(`${actionsPrefix}/UPDATE_USER`)\r\nexport const removeUser = createAction(`${actionsPrefix}/REMOVE_USER`)\r\nexport const appendMessage = createAction(`${actionsPrefix}/ADD_MESSAGE`)\r\nexport const setRoomHistory = createAction(`${actionsPrefix}/SET_ROOM_HISTORY`)\r\nexport const setToZeroMessages = createAction(\r\n  `${actionsPrefix}/SET_TO_ZERO_MESSAGES`,\r\n)\r\nexport const setSelectedRoom = createAction(\r\n  `${actionsPrefix}/SET_SELECTED_ROOM`,\r\n)\r\nexport const setMessageText = createAction(`${actionsPrefix}/SET_MESSAGE_TEXT`)\r\nexport const resetMessage = createAction(`${actionsPrefix}/RESET_MESSAGE`)\r\n\r\nconst users = handleActions(\r\n  {\r\n    [setUsers]: (_, action) => action.payload,\r\n    [addUser]: (state, action) => [action.payload, ...state],\r\n    [updateUser]: (state, action) =>\r\n      state.map((user) =>\r\n        user.userId === action.payload.userId ? action.payload : user,\r\n      ),\r\n    [removeUser]: (state, action) =>\r\n      state.filter((user) => user.socketId !== action.payload),\r\n  },\r\n  [],\r\n)\r\n\r\nconst messages = handleActions(\r\n  {\r\n    [appendMessage]: (state, action) => [...state, action.payload],\r\n    [setRoomHistory]: (state, action) => action.payload,\r\n    [setToZeroMessages]: () => [],\r\n  },\r\n  [],\r\n)\r\n\r\nconst selectedRoom = handleActions(\r\n  {\r\n    [setSelectedRoom]: (_, action) => action.payload,\r\n  },\r\n  null,\r\n)\r\n\r\nconst messageText = handleActions(\r\n  {\r\n    [setMessageText]: (_, action) => action.payload,\r\n    [resetMessage]: () => '',\r\n  },\r\n  '',\r\n)\r\n\r\nexport default combineReducers({\r\n  users,\r\n  messages,\r\n  selectedRoom,\r\n  messageText,\r\n})\r\n\r\nexport const connectSocket = () => (dispatch, getState) => {\r\n  const userProfile = userProfileSelector(getState())\r\n  const urlSocket = '/' // 'http://localhost:3000/'\r\n  // const urlSocket = 'https://homework-loft.herokuapp.com/'\r\n  socket = socketIO(urlSocket)\r\n\r\n  socket.emit('users:connect', {\r\n    userId: userProfile.id,\r\n    username: userProfile.username,\r\n  })\r\n\r\n  socket\r\n    .on('users:list', (data) => dispatch(setUsers(data)))\r\n    .on('users:add', (data) => dispatch(addUser(data)))\r\n    .on('users:leave', (data) => {\r\n      dispatch(removeUser(data))\r\n      const selectedRoom = chatSelectedRoomSelector(getState())\r\n      if (selectedRoom && selectedRoom.socketId === data)\r\n        dispatch(setSelectedRoom(null))\r\n    })\r\n    .on('message:history', (data) => dispatch(setRoomHistory(data)))\r\n    .on('message:add', (data) => dispatch(appendMessage(data)))\r\n}\r\n\r\nexport const connectRoom = ({ userId, socketId }) => (dispatch, getState) => {\r\n  const userProfile = userProfileSelector(getState())\r\n  dispatch(setToZeroMessages())\r\n  dispatch(setSelectedRoom({ recipientId: userId, socketId }))\r\n\r\n  socket.emit('message:history', {\r\n    recipientId: userId,\r\n    userId: userProfile.id,\r\n  })\r\n}\r\n\r\nexport const sendMessage = () => (dispatch, getState) => {\r\n  const state = getState()\r\n  const userProfile = userProfileSelector(state)\r\n  const selectedRoom = chatSelectedRoomSelector(state)\r\n  const messageText = chatMessageText(state)\r\n  socket.emit('message:add', {\r\n    senderId: userProfile.id,\r\n    recipientId: selectedRoom.recipientId,\r\n    roomId: selectedRoom.socketId,\r\n    text: messageText,\r\n  })\r\n  dispatch(resetMessage())\r\n}\r\n\r\nexport const disconnectSocket = () => (dispatch) => {\r\n  socket && socket.disconnect()\r\n  dispatch(setUsers([]))\r\n  dispatch(setToZeroMessages())\r\n  dispatch(setSelectedRoom(null))\r\n  dispatch(resetMessage())\r\n}\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport {\r\n  Paper,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  Typography,\r\n  CardHeader,\r\n  Divider,\r\n  ListItemSecondaryAction,\r\n  Badge\r\n} from '@material-ui/core';\r\nimport MailIcon from '@material-ui/icons/Mail';\r\nimport { withStyles } from '@material-ui/styles';\r\nimport { compose } from 'recompose';\r\nimport { chatUsersSelector, chatSelectedRoomSelector, connectRoom } from '../../store/chat';\r\nconst styles = theme => ({\r\n  column: {\r\n    // backgroundColor: '#494949',\r\n    height: 'calc(100vh - 80px)',\r\n    display: 'flex',\r\n    flexDirection: 'column'\r\n  }\r\n});\r\n\r\nconst ChannelsList = ({ classes, users, selectedRoom, dispatch }) => {\r\n  const selectRoom = user => {\r\n    dispatch(connectRoom({ userId: user.userId, socketId: user.socketId }));\r\n  };\r\n  return (\r\n    <Paper className={classes.column} square>\r\n      <CardHeader title={<Typography variant=\"h5\">Личные чаты</Typography>} />\r\n      <Divider />\r\n      <List>\r\n        {users.map((user, index) => (\r\n          <ListItem\r\n            button\r\n            key={user.userId}\r\n            selected={user.userId === selectedRoom && selectedRoom.userId}\r\n            onClick={() => selectRoom(user)}\r\n          >\r\n            <ListItemText primary={user.username} />\r\n          </ListItem>\r\n        ))}\r\n      </List>\r\n    </Paper>\r\n  );\r\n};\r\nconst mapStateToProps = state => ({\r\n  users: chatUsersSelector(state),\r\n  selectedRoom: chatSelectedRoomSelector(state)\r\n});\r\nexport default compose(\r\n  withStyles(styles),\r\n  connect(mapStateToProps)\r\n)(ChannelsList);\r\n","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Grid, Card, CardContent, CardActions, TextField, Button } from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/styles';\r\nimport classNames from 'classnames';\r\nimport _get from 'lodash.get';\r\nimport { sendMessage, setMessageText, chatMessageText } from '../../store/chat';\r\nimport { compose } from 'recompose';\r\nimport { userProfileSelector, userPermissionsSelector } from '../../store/auth';\r\nconst styles = theme => ({\r\n  messageContainer: {\r\n    marginBottom: theme.spacing(2)\r\n  },\r\n  message: {\r\n    padding: theme.spacing(1)\r\n  },\r\n  messagePrimary: {\r\n    backgroundColor: theme.palette.grey.A700\r\n  },\r\n  messageSecondary: {\r\n    backgroundColor: theme.palette.secondary.main\r\n  },\r\n  isMyMessage: {\r\n    alignSelf: 'end'\r\n  },\r\n  isAnotherMessage: {\r\n    alignSelf: 'flex-end'\r\n  },\r\n  chatArea: {\r\n    height: '100%',\r\n    overflowY: 'scroll'\r\n  },\r\n  form: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    width: '100%'\r\n  }\r\n});\r\n\r\nclass ActiveChannelArea extends PureComponent {\r\n  handleChange = event => {\r\n    const { dispatch } = this.props;\r\n    dispatch(setMessageText(event.target.value));\r\n  };\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    const { dispatch } = this.props;\r\n    dispatch(sendMessage());\r\n  };\r\n  render() {\r\n    const { classes, messages, messageText, userId, permission } = this.props;\r\n    const isCreateAllowed = !!_get(permission, 'chat.C', false);\r\n    return (\r\n      <>\r\n        <CardContent className={classes.chatArea}>\r\n          <Grid container direction=\"column\" wrap=\"nowrap\">\r\n            {messages.map((message, i) => (\r\n              <Grid\r\n                item\r\n                key={i}\r\n                className={classNames(\r\n                  classes.messageContainer,\r\n                  message.senderId !== userId ? classes.isMyMessage : classes.isAnotherMessage\r\n                )}\r\n              >\r\n                <Card\r\n                  className={classNames(\r\n                    classes.message,\r\n                    message.senderId !== userId ? classes.messagePrimary : classes.messageSecondary\r\n                  )}\r\n                >\r\n                  {message.text}\r\n                </Card>\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        </CardContent>\r\n        {isCreateAllowed && (\r\n          <CardActions>\r\n            <form onSubmit={this.handleSubmit} className={classes.form}>\r\n              <TextField\r\n                label=\"Label\"\r\n                style={{ margin: 8 }}\r\n                fullWidth\r\n                margin=\"normal\"\r\n                variant=\"filled\"\r\n                InputLabelProps={{\r\n                  shrink: true\r\n                }}\r\n                value={messageText}\r\n                onChange={this.handleChange}\r\n              />\r\n              <Button variant=\"contained\" color=\"primary\" type=\"submit\">\r\n                Отправить\r\n              </Button>\r\n            </form>\r\n          </CardActions>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = state => ({\r\n  messageText: chatMessageText(state),\r\n  userId: userProfileSelector(state).id,\r\n  permission: userPermissionsSelector(state)\r\n});\r\nexport default compose(\r\n  withStyles(styles),\r\n  connect(mapStateToProps)\r\n)(ActiveChannelArea);\r\n","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { connectSocket, disconnectSocket, chatUsersSelector, chatSelectedRoomSelector, chatMessagesList } from '../../store/chat'\r\nimport {\r\n  Grid,\r\n  Container,\r\n  Card\r\n} from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/styles';\r\nimport ChatChannelsList from './ChatChannelList'\r\nimport ChatActiveChatArea from './ChatActiveChatArea'\r\nimport { compose } from 'recompose';\r\nconst styles = theme => ({\r\n  toolbar: theme.mixins.toolbar,\r\n  column: {\r\n    // backgroundColor: '#494949',\r\n    height: 'calc(100vh - 80px)',\r\n    display: 'flex',\r\n    flexDirection: 'column'\r\n  },\r\n  wrapper: {\r\n    width: '100%',\r\n    flex: '1 1 100%',\r\n    paddingTop: theme.spacing(1)\r\n  },\r\n  empty: {\r\n    padding: theme.spacing(3)\r\n  }\r\n});\r\n\r\nclass Chat extends PureComponent {\r\n  componentDidMount () {\r\n    const { dispatch } = this.props;\r\n    dispatch(connectSocket())\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    const { dispatch } = this.props;\r\n    dispatch(disconnectSocket())\r\n  }\r\n  render() {\r\n    const { classes, users, messages, selectedRoom } = this.props;\r\n    return (\r\n      <div className={classes.wrapper}>\r\n        <Container>\r\n          <Grid container spacing={1}>\r\n            <Grid item xs={4}>\r\n              <ChatChannelsList users={users} selected={selectedRoom} />\r\n            </Grid>\r\n            <Grid item xs={8}>\r\n              <Card className={classes.column} square>\r\n                { selectedRoom ? <ChatActiveChatArea messages={messages} /> : <div className={classes.empty}>Выберите чат</div> }\r\n              </Card>\r\n            </Grid>\r\n          </Grid>\r\n        </Container>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  users: chatUsersSelector(state),\r\n  selectedRoom: chatSelectedRoomSelector(state),\r\n  messages: chatMessagesList(state)\r\n})\r\nexport default compose(withStyles(styles), connect(mapStateToProps))(Chat);\r\n","import React, { PureComponent } from 'react';\r\nimport { compose } from 'recompose';\r\nimport { connect } from 'react-redux';\r\nimport {\r\n  Container,\r\n  Typography,\r\n  Avatar,\r\n  Grid,\r\n  Paper,\r\n  Button,\r\n  TextField,\r\n  CardActions\r\n} from '@material-ui/core';\r\nimport AspectRatio from 'react-aspect-ratio';\r\nimport PasswordInput from '../common/PasswordInput';\r\nimport { withStyles } from '@material-ui/styles';\r\nimport { userProfileSelector, saveProfile, isLoadingUserProfileSelector } from '../../store/auth';\r\n\r\nconst styles = theme => ({\r\n  wrapper: {\r\n    width: '100%',\r\n    flex: '1 1 100%',\r\n    paddingTop: '40px'\r\n  },\r\n  formCard: {\r\n    padding: theme.spacing(2)\r\n  },\r\n  avatarPreview: {\r\n    width: '100%',\r\n    height: '100%',\r\n    borderRadius: '8px'\r\n  },\r\n  avatarPreviewWrapper: {\r\n    marginBottom: theme.spacing(2),\r\n    width: '100%'\r\n  },\r\n  uploadButton: {\r\n    display: 'block',\r\n    textAlign: 'center'\r\n  },\r\n  form: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    marginBottom: theme.spacing(3)\r\n  },\r\n  textField: {\r\n    marginLeft: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n    width: 200\r\n  },\r\n  formActions: {\r\n    marginTop: 'auto',\r\n    padding: 0\r\n  }\r\n});\r\n\r\nclass Profile extends PureComponent {\r\n  state = {\r\n    firstName: '',\r\n    middleName: '',\r\n    surName: '',\r\n    oldPassword: '',\r\n    newPassword: '',\r\n    confirmPassword: '',\r\n    image: '',\r\n    fileRef: React.createRef()\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { userProfile } = this.props;\r\n    this.setState({\r\n      firstName: userProfile.firstName,\r\n      middleName: userProfile.middleName,\r\n      surName: userProfile.surName,\r\n      image: userProfile.image\r\n    });\r\n  }\r\n\r\n  cancelHandler = () => {\r\n    const { userProfile } = this.props;\r\n    this.setState({\r\n      firstName: userProfile.firstName,\r\n      middleName: userProfile.middleName,\r\n      surName: userProfile.surName,\r\n      oldPassword: '',\r\n      newPassword: '',\r\n      confirmPassword: '',\r\n      image: userProfile.image\r\n    });\r\n  };\r\n\r\n  handleChange = event => {\r\n    const { name, value } = event.target;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  handleChangeFile = () => {\r\n    const { fileRef } = this.state;\r\n\r\n    const reader = new FileReader();\r\n\r\n    reader.onload = e => {\r\n      this.setState({ image: e.target.result });\r\n    };\r\n\r\n    fileRef.current.files[0] && reader.readAsDataURL(fileRef.current.files[0]);\r\n  };\r\n\r\n  submitHandler = () => {\r\n    const { dispatch } = this.props;\r\n    const { firstName, surName, middleName, oldPassword, newPassword, confirmPassword, fileRef } = this.state;\r\n    dispatch(\r\n      saveProfile({\r\n        firstName,\r\n        surName,\r\n        middleName,\r\n        oldPassword,\r\n        newPassword,\r\n        confirmPassword,\r\n        avatar: fileRef.current.files[0] || null\r\n      })\r\n    ).then(() => {\r\n      this.cancelHandler();\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { classes, isLoading } = this.props;\r\n    const {\r\n      firstName,\r\n      surName,\r\n      middleName,\r\n      oldPassword,\r\n      newPassword,\r\n      confirmPassword,\r\n      image,\r\n      fileRef\r\n    } = this.state;\r\n    return (\r\n      <div className={classes.wrapper}>\r\n        <Container>\r\n          <Paper className={classes.formCard}>\r\n            <Grid container spacing={2}>\r\n              <Grid item xs={4}>\r\n                <AspectRatio className={classes.avatarPreviewWrapper}>\r\n                  <Avatar\r\n                    className={classes.avatarPreview}\r\n                    src={image || '/assets/img/no-user-image-big.png'}\r\n                  ></Avatar>\r\n                </AspectRatio>\r\n                <Button\r\n                  className={classes.uploadButton}\r\n                  variant=\"contained\"\r\n                  component=\"label\"\r\n                  color=\"primary\"\r\n                >\r\n                  Выбрать файл\r\n                  <input\r\n                    type=\"file\"\r\n                    style={{ display: 'none' }}\r\n                    ref={fileRef}\r\n                    onChange={this.handleChangeFile}\r\n                  />\r\n                </Button>\r\n              </Grid>\r\n              <Grid item xs={8}>\r\n                <Grid container direction=\"column\" style={{ height: '100%' }}>\r\n                  <Typography variant=\"h4\" component=\"h2\" gutterBottom>\r\n                    Общая информация\r\n                  </Typography>\r\n                  <div className={classes.form}>\r\n                    <TextField\r\n                      label=\"Фамилия\"\r\n                      className={classes.textField}\r\n                      margin=\"normal\"\r\n                      name=\"surName\"\r\n                      value={surName}\r\n                      onChange={this.handleChange}\r\n                    />\r\n                    <TextField\r\n                      label=\"Имя\"\r\n                      className={classes.textField}\r\n                      margin=\"normal\"\r\n                      name=\"firstName\"\r\n                      value={firstName}\r\n                      onChange={this.handleChange}\r\n                    />\r\n                    <TextField\r\n                      label=\"Отчество\"\r\n                      className={classes.textField}\r\n                      margin=\"normal\"\r\n                      name=\"middleName\"\r\n                      value={middleName}\r\n                      onChange={this.handleChange}\r\n                    />\r\n                  </div>\r\n                  <Typography variant=\"h4\" component=\"h2\" gutterBottom>\r\n                    Пароль\r\n                  </Typography>\r\n                  <div className={classes.form}>\r\n                    <PasswordInput\r\n                      label=\"Старый пароль\"\r\n                      className={classes.textField}\r\n                      name=\"oldPassword\"\r\n                      value={oldPassword}\r\n                      handleChange={this.handleChange}\r\n                    />\r\n                    <PasswordInput\r\n                      label=\"Новый пароль\"\r\n                      className={classes.textField}\r\n                      name=\"newPassword\"\r\n                      value={newPassword}\r\n                      handleChange={this.handleChange}\r\n                    />\r\n                    <PasswordInput\r\n                      label=\"Подтверждение пароля\"\r\n                      className={classes.textField}\r\n                      name=\"confirmPassword\"\r\n                      value={confirmPassword}\r\n                      handleChange={this.handleChange}\r\n                    />\r\n                  </div>\r\n                  <CardActions className={classes.formActions}>\r\n                    <Button\r\n                      color=\"primary\"\r\n                      variant=\"contained\"\r\n                      disabled={isLoading}\r\n                      onClick={this.submitHandler}\r\n                    >\r\n                      Сохранить\r\n                    </Button>\r\n                    <Button variant=\"outlined\" onClick={this.cancelHandler} disabled={isLoading}>\r\n                      Сбросить\r\n                    </Button>\r\n                  </CardActions>\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n          </Paper>\r\n        </Container>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  userProfile: userProfileSelector(state),\r\n  isLoading: isLoadingUserProfileSelector(state)\r\n});\r\n\r\nexport default compose(\r\n  withStyles(styles),\r\n  connect(mapStateToProps)\r\n)(Profile);\r\n","import { createAction, handleActions } from 'redux-actions';\r\nimport { combineReducers } from 'redux';\r\nimport request from '../../helpers/request';\r\nimport _get from 'lodash.get'\r\nimport { openNotification } from '../notifications';\r\nimport { userProfileSelector, getUserProfileFromToken } from '../auth'\r\n\r\nexport const isLoadingUsersSelector = state => state.adminPanel.isLoadingUsers;\r\nexport const usersSelector = state => state.adminPanel.users;\r\n\r\nconst actionsPrefix = 'ADMIN_PANEL';\r\nexport const setIsLoadingUsers = createAction(`${actionsPrefix}/SET_IS_LOADING_USERS`);\r\nexport const setIsLoadingForm = createAction(`${actionsPrefix}/SET_IS_LOADING_FORM`);\r\nexport const setUsers = createAction(`${actionsPrefix}/SET_USERS`);\r\nexport const setToZeroUsers = createAction(`${actionsPrefix}/SET_TO_ZERO_USERS`);\r\n\r\nconst isLoadingUsers = handleActions(\r\n  {\r\n    [setIsLoadingUsers]: (_, action) => action.payload\r\n  },\r\n  false\r\n);\r\n\r\nconst isLoadingForm = handleActions({ [setIsLoadingForm]: (_, action) => action.payload }, false);\r\n\r\nconst users = handleActions(\r\n  {\r\n    [setUsers]: (_, action) => action.payload,\r\n    [setToZeroUsers]: () => []\r\n  },\r\n  []\r\n);\r\n\r\nexport default combineReducers({\r\n  isLoadingUsers,\r\n  isLoadingForm,\r\n  users\r\n});\r\n\r\nexport const getUsers = () => (dispatch, getState) => {\r\n  dispatch(setIsLoadingUsers(true));\r\n  request({ url: '/users', getState, dispatch })\r\n    .then(data => {\r\n      dispatch(setUsers(data));\r\n    })\r\n    .catch(error =>\r\n      openNotification({\r\n        text: error.message,\r\n        variant: 'error'\r\n      })\r\n    )\r\n    .finally(() => dispatch(setIsLoadingUsers(false)));\r\n};\r\n\r\nexport const updateUserPermission = (userId, permission) => (dispatch, getState) => new Promise((resolve) => {\r\n  dispatch(setIsLoadingForm(true));\r\n  request({\r\n    url: `/users/${userId}/permission`,\r\n    method: 'PATCH',\r\n    data: { permission },\r\n    getState,\r\n    dispatch\r\n  })\r\n    .then(() => {\r\n      openNotification({ text: 'Успешно!', variant: 'success' });\r\n      dispatch(getUsers());\r\n      const isSelf = _get(userProfileSelector(getState()), 'id', null) === userId;\r\n      isSelf && dispatch(getUserProfileFromToken())\r\n      resolve(true)\r\n    })\r\n    .catch(error => {\r\n      openNotification({\r\n        text: error.message,\r\n        variant: 'error'\r\n      })\r\n    })\r\n    .finally(() => dispatch(setIsLoadingForm(false)))\r\n});\r\n\r\n\r\nexport const deleteUser = userId => (dispatch, getState) => new Promise((resolve) => {\r\n  dispatch(setIsLoadingForm(true));\r\n  request({ url: `/users/${userId}`, method: 'DELETE', getState, dispatch })\r\n    .then(data => {\r\n      dispatch(getUsers(data));\r\n      resolve(true)\r\n    })\r\n    .catch(error => {\r\n      openNotification({\r\n        text: error.message,\r\n        variant: 'error'\r\n      })\r\n    })\r\n    .finally(() => dispatch(setIsLoadingForm(false)));\r\n});","import React from \"react\";\r\nimport {\r\n  Typography,\r\n  FormGroup,\r\n  FormControlLabel,\r\n  Checkbox\r\n} from \"@material-ui/core\";\r\n\r\n\r\nconst SettingsFormGroup = ({ handleChange, values, label }) => (\r\n  <>\r\n    <Typography variant=\"h5\" component=\"h3\" gutterBottom>\r\n      {label}\r\n    </Typography>\r\n    <FormGroup>\r\n      <FormControlLabel\r\n        control={\r\n          <Checkbox\r\n            checked={values.C}\r\n            value=\"create\"\r\n            onChange={handleChange(\"C\")}\r\n          />\r\n        }\r\n        label=\"Создание\"\r\n      />\r\n      <FormControlLabel\r\n        control={\r\n          <Checkbox\r\n            checked={values.R}\r\n            value=\"read\"\r\n            onChange={handleChange(\"R\")}\r\n          />\r\n        }\r\n        label=\"Чтение\"\r\n      />\r\n      <FormControlLabel\r\n        control={\r\n          <Checkbox\r\n            checked={values.U}\r\n            value=\"update\"\r\n            onChange={handleChange(\"U\")}\r\n          />\r\n        }\r\n        label=\"Редактирование\"\r\n      />\r\n      <FormControlLabel\r\n        control={\r\n          <Checkbox\r\n            checked={values.D}\r\n            value=\"delete\"\r\n            onChange={handleChange(\"D\")}\r\n          />\r\n        }\r\n        label=\"Удаление\"\r\n      />\r\n    </FormGroup>\r\n  </>\r\n);\r\n\r\nexport default SettingsFormGroup","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { compose } from 'recompose';\r\nimport _cloneDeep from 'lodash/cloneDeep';\r\nimport {\r\n  isLoadingUsersSelector,\r\n  usersSelector,\r\n  getUsers,\r\n  updateUserPermission,\r\n  deleteUser\r\n} from '../../store/adminPanel';\r\nimport {\r\n  Container,\r\n  Avatar,\r\n  Grid,\r\n  Paper,\r\n  Button,\r\n  ButtonGroup,\r\n  Select,\r\n  FormControl,\r\n  MenuItem,\r\n  InputLabel\r\n} from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/styles';\r\nimport SettingsFormGroup from './AdminPanelSettingsFormGroup';\r\n\r\nconst styles = theme => ({\r\n  wrapper: {\r\n    width: '100%',\r\n    flex: '1 1 100%',\r\n    paddingTop: '40px'\r\n  },\r\n  formCard: {\r\n    padding: theme.spacing(2)\r\n  },\r\n  userSelect: {\r\n    width: '100%'\r\n  },\r\n  userAvatar: {\r\n    marginRight: theme.spacing(2)\r\n  },\r\n  mb3: {\r\n    marginBottom: theme.spacing(3)\r\n  }\r\n});\r\n\r\nconst defaultState = {\r\n  selectedUserId: '',\r\n  selectedUser: null,\r\n  permission: {\r\n    chat: {\r\n      C: true,\r\n      R: true,\r\n      U: false,\r\n      D: false\r\n    },\r\n    news: {\r\n      C: true,\r\n      R: true,\r\n      U: false,\r\n      D: false\r\n    },\r\n    settings: {\r\n      C: true,\r\n      R: true,\r\n      U: false,\r\n      D: false\r\n    }\r\n  }\r\n};\r\n\r\nclass AdminPanel extends PureComponent {\r\n  state = defaultState;\r\n\r\n  componentDidMount() {\r\n    const { dispatch } = this.props;\r\n    dispatch(getUsers());\r\n  }\r\n\r\n  handleChange = part => partRule => event => {\r\n    const { checked } = event.target;\r\n    const { permission } = this.state;\r\n    this.setState({\r\n      permission: {\r\n        ...permission,\r\n        [part]: { ...permission[part], [partRule]: checked }\r\n      }\r\n    });\r\n  };\r\n  handleChangeUser = event => {\r\n    const { users } = this.props;\r\n    const { value } = event.target;\r\n    const selectedUser = value ? _cloneDeep(users.find(u => u.id === value)) : null;\r\n    this.setState({\r\n      selectedUserId: value,\r\n      selectedUser,\r\n      permission: selectedUser.permission\r\n    });\r\n  };\r\n\r\n  submitHandler = () => {\r\n    const { permission, selectedUserId } = this.state;\r\n    const { dispatch } = this.props;\r\n    dispatch(updateUserPermission(selectedUserId, permission));\r\n  };\r\n\r\n  cancelHandler = () => {\r\n    const { users } = this.props;\r\n    const { selectedUserId } = this.state;\r\n    const selectedUser = _cloneDeep(users.find(u => u.id === selectedUserId));\r\n    selectedUserId &&\r\n      this.setState({\r\n        selectedUser,\r\n        permission: selectedUser.permission\r\n      });\r\n  };\r\n\r\n  deleteHandler = () => {\r\n    const { selectedUserId } = this.state;\r\n    const { dispatch } = this.props;\r\n    selectedUserId && dispatch(deleteUser(selectedUserId)).then(() => this.setState(defaultState));\r\n  };\r\n\r\n  render() {\r\n    const { classes, users } = this.props;\r\n    const { selectedUserId, selectedUser } = this.state;\r\n    return (\r\n      <div className={classes.wrapper}>\r\n        <Container>\r\n          <Paper className={classes.formCard}>\r\n            <Grid container wrap=\"nowrap\" alignItems=\"center\" className={classes.mb3}>\r\n              <Avatar\r\n                src={(selectedUser && selectedUser.image) || '/assets/img/no-user-image.png'}\r\n                className={classes.userAvatar}\r\n              ></Avatar>\r\n              <FormControl className={classes.userSelect}>\r\n                <InputLabel htmlFor=\"age-simple\">Выберите пользователя</InputLabel>\r\n                <Select value={selectedUserId} onChange={this.handleChangeUser}>\r\n                  <MenuItem value={null}>Не выбран</MenuItem>\r\n                  {users.map(user => (\r\n                    <MenuItem value={user.id} key={user.id}>\r\n                      {user.username}\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n            {selectedUser && this.renderForms()}\r\n          </Paper>\r\n        </Container>\r\n      </div>\r\n    );\r\n  }\r\n  renderForms() {\r\n    const { classes } = this.props;\r\n    const { permission } = this.state;\r\n    return (\r\n      <>\r\n        <Grid container spacing={2} className={classes.mb3}>\r\n          <Grid item xs={4}>\r\n            <SettingsFormGroup\r\n              label=\"Настройки системы\"\r\n              values={permission['settings']}\r\n              handleChange={this.handleChange('settings')}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={4}>\r\n            <SettingsFormGroup\r\n              label=\"Новости\"\r\n              values={permission['news']}\r\n              handleChange={this.handleChange('news')}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={4}>\r\n            <SettingsFormGroup\r\n              label=\"Чат\"\r\n              values={permission['chat']}\r\n              handleChange={this.handleChange('chat')}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n        <Grid container spacing={2} justify=\"center\" alignItems=\"center\">\r\n          <ButtonGroup>\r\n            <Button variant=\"contained\" color=\"secondary\" onClick={this.submitHandler}>\r\n              Сохранить\r\n            </Button>\r\n            <Button variant=\"contained\" onClick={this.cancelHandler}>\r\n              Отменить\r\n            </Button>\r\n            <Button variant=\"contained\" onClick={this.deleteHandler}>\r\n              Удалить пользователя\r\n            </Button>\r\n          </ButtonGroup>\r\n        </Grid>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  isLoading: isLoadingUsersSelector(state),\r\n  users: usersSelector(state)\r\n});\r\n\r\nexport default compose(\r\n  withStyles(styles),\r\n  connect(mapStateToProps)\r\n)(AdminPanel);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport {\r\n  notificationsSelector,\r\n  openNotification,\r\n  closeNotification\r\n} from '../../store/notifications';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { amber, green } from '@material-ui/core/colors';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst variantIcon = {\r\n  success: CheckCircleIcon,\r\n  warning: WarningIcon,\r\n  error: ErrorIcon,\r\n  info: InfoIcon\r\n};\r\n\r\nconst useStyles1 = makeStyles(theme => ({\r\n  success: {\r\n    backgroundColor: green[600]\r\n  },\r\n  error: {\r\n    backgroundColor: theme.palette.error.dark\r\n  },\r\n  info: {\r\n    backgroundColor: theme.palette.primary.main\r\n  },\r\n  warning: {\r\n    backgroundColor: amber[700]\r\n  },\r\n  icon: {\r\n    fontSize: 20\r\n  },\r\n  iconVariant: {\r\n    opacity: 0.9,\r\n    marginRight: theme.spacing(1)\r\n  },\r\n  message: {\r\n    display: 'flex',\r\n    alignItems: 'center'\r\n  }\r\n}));\r\n\r\nfunction MySnackbarContentWrapper(props) {\r\n  const classes = useStyles1();\r\n  const { className, message, onClose, variant, ...other } = props;\r\n  const Icon = variantIcon[variant];\r\n\r\n  return (\r\n    <SnackbarContent\r\n      className={clsx(classes[variant], className)}\r\n      aria-describedby=\"client-snackbar\"\r\n      message={\r\n        <span id=\"client-snackbar\" className={classes.message}>\r\n          <Icon className={clsx(classes.icon, classes.iconVariant)} />\r\n          {message}\r\n        </span>\r\n      }\r\n      action={[\r\n        <IconButton\r\n          key=\"close\"\r\n          aria-label=\"close\"\r\n          color=\"inherit\"\r\n          onClick={onClose}\r\n        >\r\n          <CloseIcon className={classes.icon} />\r\n        </IconButton>\r\n      ]}\r\n      {...other}\r\n    />\r\n  );\r\n}\r\n\r\nMySnackbarContentWrapper.propTypes = {\r\n  className: PropTypes.string,\r\n  message: PropTypes.string,\r\n  onClose: PropTypes.func,\r\n  variant: PropTypes.oneOf(['error', 'info', 'success', 'warning']).isRequired\r\n};\r\n\r\nexport default WrappedComponent => {\r\n  const withNotifications = ({\r\n    openNotification,\r\n    closeNotification,\r\n    notifications,\r\n    ...other\r\n  }) => {\r\n    const handleClose = notificationId => (e, reason) => {\r\n      if (reason === 'clickaway') {\r\n        return;\r\n      }\r\n      closeNotification(notificationId);\r\n    };\r\n    const currentNotification = notifications.find(\r\n      notification => !!notification.isActive\r\n    );\r\n    return (\r\n      <>\r\n        <WrappedComponent {...other} openNotification={openNotification} />\r\n        {currentNotification && (\r\n          <Snackbar\r\n            anchorOrigin={{\r\n              vertical: 'bottom',\r\n              horizontal: 'right'\r\n            }}\r\n            open\r\n            autoHideDuration={2500}\r\n            onClose={handleClose(currentNotification.id)}\r\n          >\r\n            <MySnackbarContentWrapper\r\n              onClose={handleClose(currentNotification.id)}\r\n              variant={currentNotification.variant}\r\n              message={currentNotification.text}\r\n            />\r\n          </Snackbar>\r\n        )}\r\n      </>\r\n    );\r\n  };\r\n\r\n  const mapStateToProps = state => ({\r\n    notifications: notificationsSelector(state)\r\n  });\r\n  const mapDispatchToProps = {\r\n    openNotification,\r\n    closeNotification\r\n  };\r\n  return connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  )(withNotifications);\r\n};\r\n","import React, { PureComponent } from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport PrivateRoute from '../common/PrivateRoute';\r\nimport { connect } from 'react-redux';\r\nimport { compose } from 'recompose';\r\nimport { getUserProfileFromToken } from '../../store/auth';\r\nimport routes from '../../constants/routes'\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Box from '@material-ui/core/Box';\r\nimport AppHeader from './AppHeader';\r\nimport Auth from '../Auth';\r\nimport News from '../News';\r\nimport Chat from '../Chat';\r\nimport Profile from '../Profile';\r\nimport AdminPanel from '../AdminPanel';\r\nimport withNotifications from '../common/withNotificationsHOC';\r\n\r\n\r\nconst styles = () => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    height: '100%',\r\n    minHeight: '100vh',\r\n    backgroundColor: '#f5f5f5'\r\n  },\r\n  container: {\r\n    flex: '1 1 100%',\r\n    display: 'flex',\r\n    flexDirection: 'column'\r\n  },\r\n  mainLayoutWrapper: {\r\n    background: 'url(\"/assets/img/another-background.png\") no-repeat',\r\n    backgroundPosition: 'center center',\r\n    backgroundSize: 'cover',\r\n    width: '100%',\r\n    flex: '1 1 100%',\r\n    display: 'flex',\r\n    alignItems: 'stretch'\r\n  }\r\n});\r\n\r\nconst MainLayout = withStyles(styles)(({ children, classes }) => (\r\n  <div className={classes.mainLayoutWrapper}>{children}</div>\r\n));\r\n\r\nconst withLayout = Component => props => (\r\n  <MainLayout>\r\n    <Component {...props} />\r\n  </MainLayout>\r\n);\r\n\r\nconst withLayoutAndNotifications = Component =>\r\n  withNotifications(withLayout(Component));\r\n\r\nclass App extends PureComponent {\r\n  componentDidMount() {\r\n    this.props.dispatch(getUserProfileFromToken());\r\n  }\r\n  render() {\r\n    const { classes } = this.props;\r\n    return (\r\n      <div className={classes.root}>\r\n        <AppHeader />\r\n        <Box className={classes.container}>\r\n          <Switch>\r\n            <Route path={routes.home} exact component={withNotifications(Auth)} />\r\n            <Route path={routes.registration} component={withNotifications(Auth)} />\r\n            <PrivateRoute\r\n              permissionPath=\"news\"\r\n              path={routes.news}\r\n              component={withLayoutAndNotifications(News)}\r\n            />\r\n            <PrivateRoute\r\n              permissionPath=\"chat\"\r\n              path={routes.chat}\r\n              component={withLayoutAndNotifications(Chat)}\r\n            />\r\n            <PrivateRoute\r\n              path={routes.profile}\r\n              component={withLayoutAndNotifications(Profile)}\r\n            />\r\n            <PrivateRoute\r\n              permissionPath=\"settings\"\r\n              path={routes.adminPanel}\r\n              component={withLayoutAndNotifications(AdminPanel)}\r\n            />\r\n          </Switch>\r\n        </Box>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default compose(\r\n  withStyles(styles),\r\n  connect()\r\n)(App);\r\n","import { red } from '@material-ui/core/colors'\r\nimport { createMuiTheme } from '@material-ui/core/styles';\r\n\r\n// A custom theme for this app\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#63c1a0',\r\n    },\r\n    secondary: {\r\n      main: '#19857b',\r\n    },\r\n    error: {\r\n      main: red.A400,\r\n    },\r\n    background: {\r\n      default: 'rgba(255, 255, 255, .87)',\r\n    },\r\n  },\r\n});\r\n\r\nexport default theme;","import { createStore, compose, applyMiddleware, combineReducers } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport auth from './auth';\r\nimport notifications from './notifications';\r\nimport news from './news';\r\nimport adminPanel from './adminPanel';\r\nimport chat from './chat';\r\n\r\nconst rootReducer = combineReducers({\r\n  auth,\r\n  notifications,\r\n  news,\r\n  adminPanel,\r\n  chat\r\n});\r\n\r\nconst createAppStore = () => {\r\n  const store = createStore(\r\n    rootReducer,\r\n    compose(\r\n      applyMiddleware(thunk),\r\n      window.__REDUX_DEVTOOLS_EXTENSION__ ? window.__REDUX_DEVTOOLS_EXTENSION__() : noop => noop\r\n    )\r\n  );\r\n\r\n  return store;\r\n};\r\n\r\nexport default createAppStore;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/App';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { CssBaseline } from '@material-ui/core';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport theme from './theme';\r\nimport createAppStore from './store';\r\nReactDOM.render(\r\n  <ThemeProvider theme={theme}>\r\n    <CssBaseline />\r\n    <Provider store={createAppStore()}>\r\n      <BrowserRouter>\r\n        <App />\r\n      </BrowserRouter>\r\n    </Provider>\r\n  </ThemeProvider>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}